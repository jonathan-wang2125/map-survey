<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Annotate • Map‑Survey</title>
  <link rel="stylesheet" href="/css/styles.css">
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY" defer></script>
</head>
<body data-page="annotate">
  <script>
    if(!localStorage.getItem('prolificID')) location.href='login.html';
    if(!localStorage.getItem('datasetID'))  location.href='select_dataset.html';
  </script>

  <div class="container main-row">
    <div class="map-column">

      <!--
      <button id="popOutBtn"      style="margin-right:.5rem">Open full‑screen</button>
      <button id="pastAnswersBtn">View / Edit Past Answers</button>
      -->

      <p id="status"></p>

      <div class="map-row">
        <!-- <div id="locationMapContainer"></div> -->
        <div id="questionMapContainer"></div>
      </div>
    </div>
  
    <div class="question-column">
      <p id="questionText" style="font-weight:600;margin:.8rem 0;"></p>

      <form id="qaForm">
        <label>Your Answer:
          <input type="text" id="qAnswer" required>
        </label>

        <label>Difficulty (1 = Very Easy, 5 = Very Difficult):
          <input type="number" id="difficulty" min="1" max="5" required>
        </label>

        <label class="bad-label">
          <span class="inline-flex">
            <input type="checkbox" id="badQuestion">
            Question needs rephrasing
          </span>
        </label>
        
        <label id="badReasonLabel"
              for="badReason"
              style="display:none; font-weight:500; margin-bottom:.25rem;">
          Provide an answer and difficulty assuming the question is fixed
        </label>
        <textarea id="badReason"
                  placeholder="Rephrase the question so the answer provided is valid."
                  rows="3" style="width:100%;display:none;margin-top:.5rem;">
        </textarea>
       
        <label class="bad-label">
          <span class="inline-flex">
            <input type="checkbox" id="discardQuestion">
            Discard question
          </span>
        </label>


        <button type="submit">Submit</button>

        <div class="progress-wrapper">
          <progress id="saveProgress" value="0" max="1"></progress>
          <span id="progressText">0 / 0</span>
        </div>
      </form>
    </div>
  </div>

  <div id="loader" class="loader" hidden>
    <div class="spinner"></div>
    <p>Submitting Data – this may take a few minutes…</p>
  </div>
  <dialog id="msgBox" class="msgbox">
    <p id="msgText"></p>
    <form method="dialog">
      <button>OK</button>
    </form>
  </dialog>

  <script src="/js/loadNavbar.js" defer></script>
  <script type="module" src="/js/main.js" defer></script>
</body>
</html>
